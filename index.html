<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Monopoly</title>
    <style>
        /* Общие стили */
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            color: white;
            overflow: hidden;
        }

        /* Контейнер для меню */
        .menu-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            text-align: center;
            max-width: 400px;
            width: 100%;
            animation: fadeIn 1s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .menu-container h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: white;
            text-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }

        .menu-container label {
            display: block;
            margin: 15px 0 5px;
            font-weight: bold;
            color: rgba(255, 255, 255, 0.8);
            text-align: left;
        }

        .menu-container select,
        .menu-container input {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            font-size: 1rem;
            margin-bottom: 20px;
            box-sizing: border-box;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            transition: border-color 0.3s ease, background 0.3s ease;
        }

        .menu-container select:hover,
        .menu-container input:hover {
            border-color: rgba(255, 255, 255, 0.5);
        }

        .menu-container select:focus,
        .menu-container input:focus {
            border-color: #6a11cb;
            background: rgba(255, 255, 255, 0.2);
            outline: none;
        }

        .menu-container button {
            background: linear-gradient(135deg, #6a11cb, #2575fc);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }

        .menu-container button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .menu-container button:active {
            transform: translateY(0);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }

        /* Анимация фона */
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 10%, transparent 10.01%);
            background-size: 20px 20px;
            animation: moveBackground 10s linear infinite;
            z-index: -1;
        }

        @keyframes moveBackground {
            from {
                transform: translateY(0) translateX(0);
            }
            to {
                transform: translateY(-100%) translateX(-100%);
            }
        }

        /* Контейнер для игрового поля */
        .board-container {
            display: none; /* Скрываем поле по умолчанию */
            width: 100%;
            max-width: 600px;
            aspect-ratio: 1;
            position: relative;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            margin-top: 20px; /* Отступ сверху */
        }

        /* Игровое поле */
        .board {
            width: 100%;
            height: 100%;
            display: grid;
            grid-template-columns: repeat(12, 1fr); /* 12 столбцов */
            grid-template-rows: repeat(12, 1fr); /* 12 строк */
            background: #f0f0f0;
            box-sizing: border-box;
        }

        /* Стили для клеток */
        .cell {
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid #ddd;
            font-size: 10px;
            text-align: center;
            padding: 2px;
            box-sizing: border-box;
            background: white;
            color: #333;
            transition: background 0.3s ease;
            cursor: pointer; /* Добавляем курсор для клика */
        }

        .cell:hover {
            background: #f9f9f9;
        }

        /* Угловые клетки */
        .corner {
            background: linear-gradient(135deg, #6a11cb, #2575fc);
            color: white;
            font-weight: bold;
            font-size: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 5px;
            box-sizing: border-box;
        }

        /* Стили для клетки "Лотерея" */
        .cell.lottery {
            background: #ffcc00; /* Желтый цвет */
            color: black;
            font-weight: bold;
        }

        /* Свойства */
        .property {
            background: #e0f7fa; /* Светло-голубой */
            color: #333;
        }

        /* Игроки */
        .player {
            position: absolute;
            width: 4%;
            height: 4%;
            border-radius: 50%;
            transition: all 0.5s ease;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
        }

        #player1 {
            background: #ff6b6b; /* Красный */
        }

        #player2 {
            background: #4ecdc4; /* Бирюзовый */
        }

        #player3 {
            background: #ffe66d; /* Желтый */
        }

        #player4 {
            background: #ff9f43; /* Оранжевый */
        }

        /* Контейнер для кубиков и кнопки */
        .dice-controls {
            display: none; /* Скрываем по умолчанию */
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 20px; /* Отступ сверху */
            margin-bottom: 20px; /* Отступ снизу */
        }

        /* Кубики */
        .dice {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 2px solid #333;
            border-radius: 10px;
            text-align: center;
            line-height: 50px;
            font-size: 24px;
            background: white;
            color: #333;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
        }

        /* Кнопка броска */
        .roll-button {
            background: linear-gradient(135deg, #6a11cb, #2575fc);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .roll-button:hover {
            background: linear-gradient(135deg, #2575fc, #6a11cb);
        }

        /* Всплывающее окно */
        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            color: #333;
            text-align: center;
        }

        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }

        .modal.show,
        .modal-overlay.show {
            display: block;
        }

        /* Адаптация для мобильных устройств */
        @media (max-width: 600px) {
            .menu-container {
                padding: 20px;
                border-radius: 15px;
            }

            .menu-container h1 {
                font-size: 2rem;
            }

            .menu-container button {
                padding: 12px 25px;
                font-size: 1rem;
            }

            .cell {
                font-size: 8px;
                padding: 1px;
            }

            .corner {
                font-size: 10px;
            }

            .board-container {
                max-width: 100%;
                border-radius: 0;
                margin-top: 10px;
            }

            .dice {
                width: 40px;
                height: 40px;
                font-size: 20px;
                line-height: 40px;
            }

            .roll-button {
                padding: 10px 20px;
                font-size: 0.9rem;
            }

            .dice-controls {
                gap: 10px;
                margin-top: 10px;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Меню -->
    <div class="menu-container" id="menu">
        <h1>Modern Monopoly</h1>
        <label for="mode">Выберите режим:</label>
        <select id="mode">
            <option value="classic">Классический</option>
            <option value="fast">Быстрый</option>
        </select>

        <label for="players">Количество игроков (включая ботов):</label>
        <input type="number" id="players" min="1" max="4" value="2">

        <button onclick="startGame()">Начать игру</button>
    </div>

    <!-- Игровое поле -->
    <div class="board-container" id="board-container">
        <div class="board">
            <!-- Угловые клетки -->
            <div class="cell corner" style="grid-column: 1 / 2; grid-row: 1 / 2;">Старт</div> <!-- Верхний левый угол -->
            <div class="cell corner" style="grid-column: 12 / 13; grid-row: 1 / 2;">Идите в тюрьму</div> <!-- Верхний правый угол -->
            <div class="cell corner" style="grid-column: 12 / 13; grid-row: 12 / 13;">Бесплатная парковка</div> <!-- Правый нижний угол -->
            <div class="cell corner" style="grid-column: 1 / 2; grid-row: 12 / 13;">Тюрьма</div> <!-- Левый нижний угол -->

            <!-- Остальные клетки -->
            <div class="cell property" style="grid-column: 3 / 4; grid-row: 12 / 13;">Улица 1 (60$)</div>
            <div class="cell property" style="grid-column: 4 / 5; grid-row: 12 / 13;">Улица 2 (60$)</div>
            <div class="cell property" style="grid-column: 5 / 6; grid-row: 12 / 13;">Улица 3 (100$)</div>
            <div class="cell property" style="grid-column: 6 / 7; grid-row: 12 / 13;">Улица 4 (100$)</div>
            <div class="cell property" style="grid-column: 7 / 8; grid-row: 12 / 13;">Улица 5 (140$)</div>
            <div class="cell property" style="grid-column: 8 / 9; grid-row: 12 / 13;">Улица 6 (140$)</div>
            <div class="cell property" style="grid-column: 9 / 10; grid-row: 12 / 13;">Улица 7 (180$)</div>
            <div class="cell property" style="grid-column: 10 / 11; grid-row: 12 / 13;">Улица 8 (220$)</div>

            <!-- Левая сторона (снизу вверх) -->
            <div class="cell property" style="grid-column: 1 / 2; grid-row: 10 / 11;">Железная дорога 1 (200$)</div>
            <div class="cell property" style="grid-column: 1 / 2; grid-row: 9 / 10;">Железная дорога 2 (200$)</div>
            <div class="cell property" style="grid-column: 1 / 2; grid-row: 8 / 9;">Железная дорога 3 (200$)</div>
            <div class="cell property" style="grid-column: 1 / 2; grid-row: 7 / 8;">Железная дорога 4 (200$)</div>
            <div class="cell property" style="grid-column: 1 / 2; grid-row: 6 / 7;">Электростанция (150$)</div>
            <div class="cell property" style="grid-column: 1 / 2; grid-row: 5 / 6;">Водоканал (150$)</div>
            <div class="cell property" style="grid-column: 1 / 2; grid-row: 4 / 5;">Шанс</div>
            <div class="cell property" style="grid-column: 1 / 2; grid-row: 3 / 4;">Общественная казна</div>

            <!-- Верхняя сторона (справа налево) -->
            <div class="cell property" style="grid-column: 3 / 4; grid-row: 1 / 2;">Улица 9 (240$)</div>
            <div class="cell property" style="grid-column: 4 / 5; grid-row: 1 / 2;">Улица 10 (260$)</div>
            <div class="cell property" style="grid-column: 5 / 6; grid-row: 1 / 2;">Улица 11 (280$)</div>
            <div class="cell property" style="grid-column: 6 / 7; grid-row: 1 / 2;">Улица 12 (300$)</div>
            <div class="cell property" style="grid-column: 7 / 8; grid-row: 1 / 2;">Налог (200$)</div>
            <div class="cell property" style="grid-column: 8 / 9; grid-row: 1 / 2;">Налог (100$)</div>
            <div class="cell property" style="grid-column: 9 / 10; grid-row: 1 / 2;">Улица 13 (320$)</div>
            <div class="cell property" style="grid-column: 10 / 11; grid-row: 1 / 2;">Улица 14 (350$)</div>

            <!-- Правая сторона (сверху вниз) -->
            <div class="cell property" style="grid-column: 12 / 13; grid-row: 3 / 4;">Шанс</div>
            <div class="cell property" style="grid-column: 12 / 13; grid-row: 4 / 5;">Общественная казна</div>
            <div class="cell property" style="grid-column: 12 / 13; grid-row: 5 / 6;">Электростанция (150$)</div>
            <div class="cell property" style="grid-column: 12 / 13; grid-row: 6 / 7;">Водоканал (150$)</div>
            <div class="cell property" style="grid-column: 12 / 13; grid-row: 7 / 8;">Железная дорога 1 (200$)</div>
            <div class="cell property" style="grid-column: 12 / 13; grid-row: 8 / 9;">Железная дорога 2 (200$)</div>
            <div class="cell property" style="grid-column: 12 / 13; grid-row: 9 / 10;">Железная дорога 3 (200$)</div>
            <div class="cell property" style="grid-column: 12 / 13; grid-row: 10 / 11;">Железная дорога 4 (200$)</div>

            <!-- Игроки -->
            <div id="player1" class="player"></div>
            <div id="player2" class="player"></div>
            <div id="player3" class="player"></div>
            <div id="player4" class="player"></div>
        </div>
    </div>

    <!-- Кубики и кнопка броска -->
    <div class="dice-controls" id="dice-controls">
        <div id="dice1" class="dice">1</div>
        <div id="dice2" class="dice">1</div>
        <button class="roll-button" onclick="rollDice()">Бросить кубики</button>
    </div>

    <!-- Всплывающее окно -->
    <div class="modal" id="cellModal">
        <h2 id="modalTitle"></h2>
        <p id="modalDescription"></p>
        <button onclick="closeModal()">Закрыть</button>
    </div>
    <div class="modal-overlay" id="modalOverlay"></div>

    <script>
        // Элементы меню и поля
        const menu = document.getElementById('menu');
        const boardContainer = document.getElementById('board-container');
        const diceControls = document.getElementById('dice-controls');
        const dice1Element = document.getElementById('dice1');
        const dice2Element = document.getElementById('dice2');
        const cellModal = document.getElementById('cellModal');
        const modalOverlay = document.getElementById('modalOverlay');
        const modalTitle = document.getElementById('modalTitle');
        const modalDescription = document.getElementById('modalDescription');

        // Игроки и боты
        let players = [];
        let currentPlayerIndex = 0;

        // Начало игры
        function startGame() {
            const mode = document.getElementById('mode').value;
            const playersCount = parseInt(document.getElementById('players').value);

            // Скрываем меню и показываем поле и кубики
            menu.style.display = 'none';
            boardContainer.style.display = 'block';
            diceControls.style.display = 'flex'; // Показываем кубики и кнопку

            // Инициализация игры
            initGame(mode, playersCount);

            // Заменяем случайную клетку на "Лотерея"
            replaceRandomCellWithLottery();

            // Добавляем обработчики кликов на клетки
            const cells = document.querySelectorAll('.cell');
            cells.forEach(cell => {
                cell.addEventListener('click', () => {
                    if (window.innerWidth <= 600) { // Только для мобильных устройств
                        showCellInfo(cell);
                    }
                });
            });
        }

        // Показ информации о клетке
        function showCellInfo(cell) {
            const cellData = getCellDataByElement(cell);
            modalTitle.textContent = cellData.name;
            modalDescription.textContent = `Тип: ${cellData.type}\nЦена: ${cellData.price || 'Н/Д'}$\nАренда: ${cellData.rent || 'Н/Д'}$`;
            cellModal.classList.add('show');
            modalOverlay.classList.add('show');
        }

        // Закрытие модального окна
        function closeModal() {
            cellModal.classList.remove('show');
            modalOverlay.classList.remove('show');
        }

        // Получение данных о клетке по элементу
        function getCellDataByElement(cell) {
            const cells = [
                { type: "start", name: "Старт" },
                { type: "property", name: "Улица 1", price: 60, rent: 10 },
                { type: "property", name: "Улица 2", price: 60, rent: 10 },
                { type: "property", name: "Улица 3", price: 100, rent: 20 },
                { type: "property", name: "Улица 4", price: 100, rent: 20 },
                { type: "property", name: "Улица 5", price: 140, rent: 30 },
                { type: "property", name: "Улица 6", price: 140, rent: 30 },
                { type: "property", name: "Улица 7", price: 180, rent: 40 },
                { type: "railroad", name: "Железная дорога 1", price: 200, rent: 50 },
                { type: "railroad", name: "Железная дорога 2", price: 200, rent: 50 },
                { type: "railroad", name: "Железная дорога 3", price: 200, rent: 50 },
                { type: "railroad", name: "Железная дорога 4", price: 200, rent: 50 },
                { type: "utility", name: "Электростанция", price: 150, rent: 25 },
                { type: "utility", name: "Водоканал", price: 150, rent: 25 },
                { type: "chance", name: "Шанс" },
                { type: "community_chest", name: "Общественная казна" },
                { type: "tax", name: "Налог", amount: 200 },
                { type: "tax", name: "Налог", amount: 100 },
                { type: "jail", name: "Тюрьма" },
                { type: "free_parking", name: "Бесплатная парковка" },
                { type: "go_to_jail", name: "Идите в тюрьму" },
                { type: "property", name: "Улица 8", price: 220, rent: 45 },
                { type: "property", name: "Улица 9", price: 240, rent: 50 },
                { type: "property", name: "Улица 10", price: 260, rent: 55 },
                { type: "property", name: "Улица 11", price: 280, rent: 60 },
                { type: "property", name: "Улица 12", price: 300, rent: 65 },
            ];

            // Находим индекс клетки
            const index = Array.from(document.querySelectorAll('.cell')).indexOf(cell);
            return cells[index] || { type: "unknown", name: "Неизвестная клетка" };
        }

        // Остальная логика игры...
    </script>
</body>
</html>
